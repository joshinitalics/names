<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Lexicon Aggregator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,700&family=Inter:wght@300;400;600&display=swap');
        
        :root {
            --bg-color: #050505;
            --card-bg: #0f0f0f;
            --text-main: #f8fafc;
            --text-dim: #94a3b8;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            margin: 0;
            min-height: 100vh;
        }

        .serif { font-family: 'Fraunces', serif; }

        .word-card {
            background-color: var(--card-bg);
            border: 1px solid #1e293b;
        }

        .loader {
            width: 20px; height: 20px;
            border: 2px solid rgba(255,255,255,0.1);
            border-top: 2px solid var(--accent);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Colors: Toned down Red, Vibrant Green, Vibrant Blue */
        .theme-red { --accent: #b91c1c; }     /* Muted Crimson */
        .theme-green { --accent: #10b981; }   /* Vibrant Emerald */
        .theme-blue { --accent: #3b82f6; }    /* Vibrant Blue */

        .accent-border { border-top: 3px solid var(--accent); }
        .accent-bg { background-color: var(--accent); }
        .accent-text { color: var(--accent); }
        
        .fade-in {
            animation: fadeIn 0.8s ease forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        #simple-text-modal {
            background-color: rgba(0,0,0,0.85);
            backdrop-filter: blur(8px);
        }
    </style>
</head>
<body class="p-6 md:p-8">

    <header class="max-w-7xl mx-auto mb-12 text-center">
        <h1 class="serif text-4xl md:text-5xl text-white">Words of the Day</h1>
    </header>

    <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- Section 1: Academic (Red) -->
        <div id="card-academic" class="word-card theme-red accent-border rounded-2xl p-6 py-5 min-h-[260px] flex flex-col shadow-lg">
            <div class="flex justify-between items-center mb-0">
                <span class="accent-text text-[9px] font-black uppercase tracking-[0.2em]">Academic</span>
                <div id="loader-academic" class="loader hidden"></div>
            </div>
            <div id="target-academic" class="flex-grow flex flex-col justify-center">
                <p class="text-slate-600 text-sm animate-pulse">Consulting Lexicon...</p>
            </div>
        </div>

        <!-- Section 2: Literary (Green) -->
        <div id="card-literary" class="word-card theme-green accent-border rounded-2xl p-6 py-5 min-h-[260px] flex flex-col shadow-lg">
            <div class="flex justify-between items-center mb-0">
                <span class="accent-text text-[9px] font-black uppercase tracking-[0.2em]">Literary</span>
                <div id="loader-literary" class="loader hidden"></div>
            </div>
            <div id="target-literary" class="flex-grow flex flex-col justify-center">
                <p class="text-slate-600 text-sm animate-pulse">Consulting Lexicon...</p>
            </div>
        </div>

        <!-- Section 3: Whimsical (Blue) -->
        <div id="card-whimsical" class="word-card theme-blue accent-border rounded-2xl p-6 py-5 min-h-[260px] flex flex-col shadow-lg">
            <div class="flex justify-between items-center mb-0">
                <span class="accent-text text-[9px] font-black uppercase tracking-[0.2em]">Whimsical</span>
                <div id="loader-whimsical" class="loader hidden"></div>
            </div>
            <div id="target-whimsical" class="flex-grow flex flex-col justify-center">
                <p class="text-slate-600 text-sm animate-pulse">Consulting Lexicon...</p>
            </div>
        </div>
    </div>

    <div class="text-center mt-12 space-x-4">
        <button onclick="generateAll()" class="px-10 py-4 bg-white text-black font-black rounded-full hover:bg-slate-200 hover:scale-105 transition-all active:scale-95 text-[10px] uppercase tracking-[0.2em] shadow-xl">
            Check for Updates
        </button>
        <button onclick="showSimpleText()" class="px-10 py-4 bg-slate-800 text-white font-black rounded-full hover:bg-slate-700 hover:scale-105 transition-all active:scale-95 text-[10px] uppercase tracking-[0.2em] shadow-xl">
            Simple Text
        </button>
    </div>

    <!-- Simple Text Modal -->
    <div id="simple-text-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden p-4">
        <div class="bg-[#1a1a1a] border border-slate-800 w-full max-w-2xl rounded-3xl p-8 shadow-2xl">
            <div class="flex justify-between items-center mb-6">
                <h3 class="serif text-2xl text-white">Simple View</h3>
            </div>
            <div id="simple-content-area" class="space-y-4 font-mono text-sm leading-relaxed text-slate-300"></div>
            <div class="mt-8 pt-6 border-t border-slate-800 flex justify-end gap-3">
                <button id="copy-btn" onclick="copySimpleText()" class="px-6 py-2 bg-blue-600 hover:bg-blue-500 text-white text-[10px] font-bold uppercase rounded-full transition-colors">Copy</button>
                <button onclick="closeModal()" class="px-6 py-2 bg-slate-700 hover:bg-slate-600 text-white text-[10px] font-bold uppercase rounded-full transition-colors">Close</button>
            </div>
        </div>
    </div>

    <script>
        const manualApiKey = ""; 
        const apiKey = manualApiKey || (typeof __api_key !== 'undefined' ? __api_key : "");
        let currentWords = { academic: null, literary: null, whimsical: null };

        function getSydneyDateString() {
            return new Intl.DateTimeFormat('en-CA', {
                timeZone: 'Australia/Sydney',
                year: 'numeric',
                month: '2-digit',
                day: '2-digit'
            }).format(new Date());
        }

        const TIERS = {
            academic: "Generate a sophisticated, high-level academic 'Word of the Day' (like GRE/SAT level).",
            literary: "Generate a rare, beautiful, or archaic 'Word of the Day' often found in classic literature.",
            whimsical: "Generate a charming, whimsical, or fanciful 'Word of the Day' that is legitimate but playful (e.g., 'susurrus', 'petrichor', 'mellifluous')."
        };

        async function fetchAIWord(tier) {
            const loader = document.getElementById(`loader-${tier}`);
            const target = document.getElementById(`target-${tier}`);
            
            loader.classList.remove('hidden');
            target.classList.add('opacity-30');

            try {
                const dateSeed = getSydneyDateString();
                const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
                
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ 
                            parts: [{ 
                                text: `SYSTEM: Today is ${dateSeed} in Sydney. This date is the absolute seed for word selection. You must always return the same word for this specific date. 
                                TASK: ${TIERS[tier]} 
                                FORMAT: Return ONLY JSON: {"word": "...", "pos": "...", "definition": "..."}. Definition must be one sentence.` 
                            }] 
                        }],
                        generationConfig: { 
                            responseMimeType: "application/json", 
                            temperature: 0 // Temperature 0 ensures the same output for the same prompt/seed
                        }
                    })
                });

                if (!response.ok) throw new Error("API Error");

                const result = await response.json();
                const wordData = JSON.parse(result.candidates[0].content.parts[0].text);
                
                currentWords[tier] = wordData;

                target.innerHTML = `
                    <div class="fade-in">
                        <div class="flex items-baseline gap-2 mb-1 flex-wrap">
                            <h2 class="serif text-3xl text-white capitalize tracking-tight">${wordData.word}</h2>
                            <span class="text-slate-500 italic text-[13px] font-light lowercase">${wordData.pos}</span>
                        </div>
                        <div class="w-8 h-[2px] accent-bg rounded-full mb-4 opacity-80"></div>
                        <p class="text-slate-300 text-base font-light leading-relaxed">${wordData.definition}</p>
                    </div>
                `;
            } catch (err) {
                target.innerHTML = `<p class="text-red-900 text-[10px] uppercase font-bold">Lexicon Unavailable.</p>`;
            } finally {
                loader.classList.add('hidden');
                target.classList.remove('opacity-30');
            }
        }

        function generateAll() {
            Object.keys(TIERS).forEach(tier => fetchAIWord(tier));
        }

        function showSimpleText() {
            const modal = document.getElementById('simple-text-modal');
            const container = document.getElementById('simple-content-area');
            const lines = [];
            ['academic', 'literary', 'whimsical'].forEach((id, idx) => {
                const color = ['ðŸ”´', 'ðŸŸ¢', 'ðŸ”µ'][idx];
                if (currentWords[id]) {
                    lines.push(`${color} <b>${currentWords[id].word.toLowerCase()}</b> â€¢ ${currentWords[id].pos.toLowerCase()} â€¢ ${currentWords[id].definition.toLowerCase()}`);
                }
            });
            container.innerHTML = lines.map(line => `<div>${line}</div>`).join('');
            modal.classList.remove('hidden');
        }

        function copySimpleText() {
            const text = ['academic', 'literary', 'whimsical']
                .filter(id => currentWords[id])
                .map((id, i) => `${['ðŸ”´','ðŸŸ¢','ðŸ”µ'][i]} ${currentWords[id].word.toLowerCase()} â€¢ ${currentWords[id].pos.toLowerCase()} â€¢ ${currentWords[id].definition.toLowerCase()}`)
                .join('\n');
            const el = document.createElement('textarea');
            el.value = text;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);
        }

        function closeModal() { document.getElementById('simple-text-modal').classList.add('hidden'); }

        window.onload = generateAll;
    </script>
</body>
</html>
